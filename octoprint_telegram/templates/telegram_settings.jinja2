<form class="form-horizontal" id="settings_plugin_telegram">
	<h3>Telegram settings</h3>
	<p>If you don't know what to enter in this section, please have a look at <a href="https://github.com/fabianonline/OctoPrint-Telegram/blob/stable/README.md">the documentation at github</a>.</p>
	<p>The current connection status is: <strong data-bind="text: connection_state_str"></strong></p>
	<div class="control-group">
		<label class="control-label">{{ _('Telegram Token') }}</label>
		<div class="controls">
			<input type="text" class="input-block-level" id="settings_plugin_telegram_token" data-bind="value: settings.settings.plugins.telegram.token" />
			<span class="help-block"><a href="#" data-bind="click: testToken, visible: ! isloading()">Test this token</a></span>
			<span class="help-block" data-bind="if: token_state_str || isloading()">Token status is:
				<strong data-bind="text: token_state_str, visible: ! isloading()"></strong>
				<strong data-bind="if: isloading">Testing the token, please wait...</strong>
			</span>
		</div>
	</div>
	<table>
		<tr>
			<th>Chat</th>
			<th>Accept commands</th>
			<th>Send notifications</th>
		</tr>
		<!-- ko foreach: listHelper.paginatedItems -->
			<tr>
				<td data-bind="text: title"></td>
				<td><input type="checkbox" data-bind="if: private, checked: accept_commands" /></td>
				<td><input type="checkbox" data-bind="checked: send_notifications" /></td>
			</tr>
		<!-- /ko -->
	</table>
	<div class="control-group">
		<label class="control-label">{{ _('Chat-ID') }}</label>
		<div class="controls">
			<input type="text" class="input-block-level" data-bind="value: settings.settings.plugins.telegram.chat" />
			<span class="help-block">Which chat to use. Currently known chats are:
				<ul data-bind="foreach: listHelper.paginatedItems">
					<li><span data-bind="text: id"></span> - <span data-bind="text: name"></span></li>
				</ul>
			</span>
		</div>
	</div>

	<h4>Notification settings</h4>
	<div class="control-group">
		<label class="control-label">{{ _('Send notification every') }}</label>
		<div class="controls">
			<div class="input-append">
				<input type="number" step="any" min="0.0" class="input-mini text-right" data-bind="value: settings.settings.plugins.telegram.notification_height" />
				<span class="add-on">mm</span>
			</div>
			<div class="input-append">
				<input type="number" step="1" min="0" class="input-mini text-right" data-bind="value: settings.settings.plugins.telegram.notification_time" />
				<span class="add-on">min</span>
			</div>
			<span class="help-block">Sends a message after layer height changed by this height or this many minutes passed since the last notification. Set to 0 to disable.</span>
		</div>
	</div>
	<div class="control-group">
		<div class="controls">
			<label class="checkbox">
				<input type="checkbox" data-bind="checked: settings.settings.plugins.telegram.message_at_startup" />
				Send a notification when octoprint has completed startup.
			</label>
		</div>
	</div>
	<div class="control-group">
		<div class="controls">
			<label class="checkbox">
				<input type="checkbox" data-bind="checked: settings.settings.plugins.telegram.message_at_shutdown" />
				Send a notification when octoprint is shutting down.
			</label>
		</div>
	</div>
	<div class="control-group">
		<div class="controls">
			<label class="checkbox">
				<input type="checkbox" data-bind="checked: settings.settings.plugins.telegram.message_at_print_started" />
				Send a notification when a new print has started.
			</label>
		</div>
	</div>
	<div class="control-group">
		<div class="controls">
			<label class="checkbox">
				<input type="checkbox" data-bind="checked: settings.settings.plugins.telegram.message_at_print_done" />
				Send a notification when a print has finished.
			</label>
		</div>
	</div>
	<div class="control-group">
		<div class="controls">
			<label class="checkbox">
				<input type="checkbox" data-bind="checked: settings.settings.plugins.telegram.message_at_print_failed" />
				Send a notification when a print has failed or has been cancelled.
			</label>
		</div>
	</div>
	<div class="control-group">
		<label class="control-label">{{ _('Delay for finished prints notification') }}</label>
		<div class="controls">
			<div class="input-append">
				<input type="number" step="any" min="0.0" class="input-mini text-right" data-bind="value: settings.settings.plugins.telegram.message_at_print_done_delay" />
				<span class="add-on">s</span>
			</div>
			<span class="help-block">Wait this many seconds after a print has finished before sending a notification. This can be useful to wait
				for the head and bed to reach their final positions. Set to 0 to disable.</span>
		</div>
	</div>

	<h4>Messages</h4>
	<div class="control-group">
		<label class="control-label">{{ _('Message at print start') }}</label>
		<div class="controls">
			<textarea rows="4" class="block" data-bind="value: settings.settings.plugins.telegram.messages.PrintStarted"></textarea>
		</div>
	</div>
	<div class="control-group">
		<label class="control-label">{{ _('Message at print finished') }}</label>
		<div class="controls">
			<textarea rows="4" class="block" data-bind="value: settings.settings.plugins.telegram.messages.PrintDone"></textarea>
		</div>
	</div>
	<div class="control-group">
		<label class="control-label">{{ _('Message at print failure') }}</label>
		<div class="controls">
			<textarea rows="4" class="block" data-bind="value: settings.settings.plugins.telegram.messages.PrintFailed"></textarea>
		</div>
	</div>
	<div class="control-group">
		<label class="control-label">{{ _('Message at new height') }}</label>
		<div class="controls">
			<textarea rows="4" class="block" data-bind="value: settings.settings.plugins.telegram.messages.ZChange"></textarea>
		</div>
	</div>
	<div class="control-group">
		<label class="control-label">{{ _('Message for /status when not printing') }}</label>
		<div class="controls">
			<textarea rows="4" class="block" data-bind="value: settings.settings.plugins.telegram.messages.TelegramSendNotPrintingStatus"></textarea>
		</div>
	</div>

	<h4>Stuff</h4>
	<div class="control-group">
		<div class="controls">
			<label class="checkbox">
				<input type="checkbox" data-bind="checked: settings.settings.plugins.telegram.tracking_activated" />
				Allow this plugin to send anonymous usage data.
			</label>
			<span class="help-block">I'd like to know how many people are using this plugin and how it is used. So I implemented a method to report
			anonymous usage data back to me. That data doesn't contain any private information, just generic things like "the plugin was started" or
			"a print finished notification has been sent". That feature is off by default. If you leave it off, no data of any kind will be sent back
			to me.</span>
		</div>
	</div>

	<div class="control-group">
		<div class="controls">
			<label class="checkbox">
				<input type="checkbox" data-bind="checked: settings.settings.plugins.telegram.debug" />
				Enable logging of debug information for this plugin to octoprint.log
			</label>
		</div>
	</div>
</form>